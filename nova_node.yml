---
- name: Create nova node UCS Service Profile Template
  hosts: ucs-sim
  connection: local
  gather_facts: no

  roles:
    - { role: spt-without-fc, ucsm_cred_user: 'admin', ucsm_cred_pw: 'admin',
                       mac_pools: [ { pool_name: "nova01-eth0",
                                      pool_desc: "nova01-eth0",
                                      start_range: "00:25:B5:AA:ED:00", 
                                      end_range: "00:25:B5:AA:ED:FF",
                                      state: "present" },
                                    { pool_name: "nova01-eth1",
                                      pool_desc: "nova01-eth1",
                                      start_range: "00:25:B5:AA:EE:00", 
                                      end_range: "00:25:B5:AA:EE:FF",
                                      state: "present" },
                                    { pool_name: "nova01-eth2",
                                      pool_desc: "nova01-eth2",
                                      start_range: "00:25:B5:AA:EF:00", 
                                      end_range: "00:25:B5:AA:EF:FF",
                                      state: "present" } ],
                       qos_policies: [ { policy_name: "nova01-qos",
                                         policy_desc: "nova01-qos",
                                         rate: "10240",
                                         state: "present" } ],
                       vnic_templates: [ { template_name: "nova01-eth0",
                                           template_desc: "nova01-eth0",
                                           mac_pool_name: "nova01-eth0",
                                           vlan_list: "mgmt501",
                                           qos_policy: "nova01-qos",
                                           mtu: "1500",
                                           switch_id: "A-B",
                                           state: "present" },
                                         { template_name: "nova01-eth1",
                                           template_desc: "nova01-eth1",
                                           mac_pool_name: "nova01-eth1",
                                           vlan_list: "net502",
                                           qos_policy: "nova01-qos",
                                           mtu: "9000",
                                           switch_id: "B-A",
                                           state: "present" },
                                         { template_name: "nova01-eth2",
                                           template_desc: "nova01-eth2",
                                           mac_pool_name: "nova01-eth2",
                                           vlan_list: "net503",
                                           qos_policy: "nova01-qos",
                                           mtu: "9000",
                                           switch_id: "B-A",
                                           state: "present" } ],
                       boot_lan_policies: [ { policy_name: "nova01-pxe",
                                              policy_desc: "nova01-pxe-boot",
                                              vnic_name: "nova01-eth0",
                                              state: "present" } ],
                       firmware_policies: [ { policy_name: "nova01-fw",
                                              policy_desc: "nova01-fw",
                                              blade_bundle_version: "",
                                              rack_bundle_version: "",
                                              state: "present" } ],
                       maintenance_policies: [ { policy_name: "nova01-maint",
                                                 policy_desc: "nova01-maint",
                                                 state: "present" } ],
                       uuid_pools: [ { pool_name: "nova01-uuid",
                                       pool_desc: "nova01-uuid",
                                       start_range: "0000-0025B5AAED01", 
                                       end_range: "0000-0025B5AAEDFF",
                                       state: "present" } ],
                       server_pools: [ { pool_name: "nova01-svr",
                                         pool_desc: "nova01-svr",
                                         chassis_range: "1,2,3,4", 
                                         slot_range: "1,2,3,4",
                                         state: "present" } ],
                       service_profile_templates: [ { 
                                         template_name: "nova01-spt",
                                         template_desc: "nova01-spt",
                                         template_type: "updating-template",
                                         uuid_pool_name: "nova01-uuid", 
                                         server_pool_name: "nova01-svr",
                                         boot_policy_name: "nova01-pxe",
                                         firmware_policy_name: "nova01-fw",
                                         maintenance_policy_name: "nova01-maint",
                                         power_policy_name: "default",
                                         vnic_templates: "nova01-eth0,nova01-eth1,nova02-eth2",
                                         state: "present" } ]
      }
